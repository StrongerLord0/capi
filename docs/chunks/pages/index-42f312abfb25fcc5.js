(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5405],{75557:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(41009)}])},41009:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return h}});var n=a(85893),o=a(86501),s=a(67294),l=a(11163),i={src:"/_next/static/media/capi.c7de115a.png",height:4431,width:4431,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAA/0lEQVR42mOAAs2lS1cdPHz09K/DR079WrJ4xUGQGFxy34Hj7569+vT/2avP/5+/+fb/+euv//ftP/YOrGjN2s0Hb999+n/OpP6fS6f1/d+5Yt7/w7t2/Lz34MX/FSvXHWQ4euLir43rNv6fnO34f+Pk2v83N/b9Pzg95//GlSv+Hz916RdDW2XJryWtOf+3Tav5v29Ow/9jS7v+n1tS/X/HhnX/j568+IuhOs794Nrekv/r+kp/ghQtbEj9v3Ht+p8Pn7z5v3zFWpBjxTR7iuLergEq2jyh+P/i3vr/D56++3/w0Im3QEkNuE8aMiIO9uWH/prQ2fFr5eqNB2GSAFsCmroSgTJKAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8};a(59917);var c=a(59600),r=a(9669),u=a.n(r);let d=()=>{let[e,t]=(0,s.useState)(null);(0,l.useRouter)();let[a,r]=(0,s.useState)(!1),[d,h]=(0,s.useState)(null),[p,m]=(0,s.useState)(null),[g,w]=(0,s.useState)({}),[A,f]=(0,s.useState)(!1);(0,s.useEffect)(()=>{d&&h(null);let e=new URLSearchParams(window.location.search),t=Object.fromEntries(e.entries());console.log(t),w(t),m(t.img),console.log(i)},[]);let v=async()=>{f(!0);let e=await E();await S(e),f(!1),r(!0)},N=async()=>{var e;let a;let n=null==window?void 0:null===(e=window.phantom)||void 0===e?void 0:e.solana,{solana:s}=window;if(!(null==n?void 0:n.isPhantom)||!s.isPhantom){o.ZP.error("Phantom no esta instalado"),setTimeout(()=>{window.open("https://phantom.app/","_blank")},2e3);return}(null==n?void 0:n.isPhantom)&&(a=n);let{publicKey:l}=await a.connect();console.log("publicKey",l.toString()),t(l.toString()),window.localStorage.setItem("publicKey",l.toString()),o.ZP.success("Tu Wallet esta conectada \uD83D\uDC7B")},{mutateAsync:b}=(0,c.R_T)(),j=async e=>{let t=await b({data:[e],options:{uploadWithGatewayUrl:!0,uploadWithoutDirectory:!0}});return t[0]},E=async e=>{await fetch(p).then(e=>e.blob()).then(t=>{t.name="blob.png",e=new File([t],"image.png",{type:t.type})});let t=await j(e);return console.log("uploadUrl",t),t},S=async t=>{try{let a={name:g.title,imageUrl:t,publicKey:e};console.log("Este es el objeto mintedData:",a);let{data:n}=await u().post("/api/mintnft",a),{signature:o}=n,s="https://solscan.io/tx/".concat(o,"?cluster=").concat("devnet");console.log("solanaExplorerUrl",s)}catch(e){console.error("ERROR GENERATE NFT",e),o.ZP.error("Error al generar el NFT")}};return(0,n.jsxs)("div",{className:"caja",children:[(0,n.jsx)("a",{href:"http://localhost:3000/?title=".concat(encodeURI(g.title),"&user=").concat(encodeURI(g.user),"&issuer=").concat(encodeURI(g.issuer),"&img=").concat(encodeURI(g.img))}),(0,n.jsxs)("div",{className:"caja-header",children:[(0,n.jsx)("div",{className:"icon",children:(0,n.jsx)("img",{src:i.src,alt:"Icon"})}),(0,n.jsx)("h1",{className:"capi",children:"CAPI"})]}),(0,n.jsxs)("div",{className:"info",children:[(0,n.jsx)("p",{className:"title",children:g.title}),(0,n.jsx)("p",{className:"nombre",children:g.user}),(0,n.jsxs)("p",{className:"institucion",children:["Certificado por: ",g.issuer]})]}),e?(0,n.jsx)("button",{className:"pago",onClick:v,disabled:A||a,children:a?"\xa1Listo!":A?"...":"Adquirir Certificado"}):(0,n.jsx)("button",{className:"pago",onClick:N,children:"Connectar Wallet"})]})};var h=d},7420:function(){},95856:function(){}},function(e){e.O(0,[8766,7569,9774,2888,179],function(){return e(e.s=75557)}),_N_E=e.O()}]);